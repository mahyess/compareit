from django.shortcuts import render, HttpResponse
from .lib.scraper import main as scraper
from django.http import JsonResponse
from django.core import serializers
# from .lib.scraper import daraz_search, muncha_search
import json
# Create your views here.


def home(request):

    context = {
        'title' : 'Home',
    }
    return render(request, 'main/dashboard.html', context)


def allproducts(request):   
    context = {
        'title' : 'All Products',
    }
    return render(request, 'main/home.html', context)


# def search(request, query):

#     data = daraz_search(query)

#     return JsonResponse(json.loads(data))
# for api based

data = [{
'id': '66019', 
'details': 
    {'origin': 0, 
    'url': '//www.daraz.com.np/products/oppo-f5-s-6gb-ram-64gb-rom-60-black-i24424-s72864.html?search=1', 
    'title': 'Oppo F5-S [6GB RAM/ 64GB ROM] 6.0" - (Black)', 
    'image': 'https://static-01.daraz.com.np/original/5f3142001034f2701e92dd02b64d072f.jpg', 
    'price': 
        {'selling_price': 35000.0, 
        'marking_price': 44990.0}
        }
    }, 
{'id': '161914', 'details': {'origin': 0, 'url': '//www.daraz.com.np/products/oppo-a3s-2-gb-ram-16-gb-rom-red-i325384-s10976269.html?search=1', 'title': 'Oppo A3S [2 GB RAM, 16 GB ROM] - Red', 'image': 'https://static-01.daraz.com.np/original/9a5eb7b6e0721ae8af2942428cc8a90b.jpg', 'price': {'selling_price': 18516.0, 'marking_price': 19490.0}}}, {'id': '161915', 'details': {'origin': 0, 'url': '//www.daraz.com.np/products/oppo-a3s-2-gb-ram-16-gb-rom-pink-i325385-s10976270.html?search=1', 'title': 'Oppo A3S [2 GB RAM, 16 GB ROM] - Pink', 'image': 'https://static-01.daraz.com.np/original/9e902e56e94a4e13e7d7d2e17b45036f.jpg', 'price': {'selling_price': 18516.0, 'marking_price': 19490.0}}}, {'id': '170940', 'details': {'origin': 0, 'url': '//www.daraz.com.np/products/oppo-f9-4-gb-ram-64-gb-rom-red-i435093-s22194401.html?search=1', 'title': 'Oppo F9 [4 GB RAM / 64 GB ROM] - Red', 'image': 'https://static-01.daraz.com.np/original/103fb9d76b3c6fe2671bc44f902bc83c.jpg', 'price': {'selling_price': 39510.0, 'marking_price': 41590.0}}}, {'id': '2786', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--4552', 'title': 'Oppo Neo 7 (A33W)', 'image': 'https://sd.azureedge.net/0/images/product/2786/21272-White-p-0.jpg', 'price': {'selling_price': 15690.0, 'marking_price': 15690}}}, {'id': '2785', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--4551', 'title': 'Oppo F1s (A1601)', 'image': 'https://sd.azureedge.net/0/images/product/2785/21274-Gold-p-0.jpg', 'price': {'selling_price': 33890.0, 'marking_price': 33890}}}, {'id': '2784', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--4550', 'title': 'Oppo A37F', 'image': 'https://sd.azureedge.net/0/images/product/2784/21273-Gold-p-0.jpg', 'price': {'selling_price': 20490.0, 'marking_price': 20490}}}, {'id': '19208', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--30975', 'title': 'Oppo A83 Smart Mobile Phone [5.7", 2GB RAM, 16GB ROM,13MP]', 'image': 'https://sd.azureedge.net/0/images/product/19208/OPPO-A83-2GB-16GB-GOLD-p-0.jpg', 'price': {'selling_price': 16730.0, 'marking_price': 17990}}}, {'id': '19207', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--30974', 'title': 'Oppo A71K Smart Mobile Phone [5.2", 2GB RAM, 16GB ROM, 13MP]', 'image': 'https://sd.azureedge.net/0/images/product/19207/OPPO-A71K-GOLD-p-0.jpg', 'price': {'selling_price': 16042.0, 'marking_price': 17250}}}, {'id': '16993', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--29391', 'title': 'Oppo F7 Smart Mobile Phone - [4GB 64GB 3400mAh]', 'image': 'https://sd.azureedge.net/0/images/product/16993/oppo-f7-C-16993.jpg', 'price': {'selling_price': 36260.0, 'marking_price': 38990}}}, {'id': '16993', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--29390', 'title': 'Oppo F7 Smart Mobile Phone - [4GB 64GB 3400mAh]', 'image': 'https://sd.azureedge.net/0/images/product/16993/oppo-f7-C-16993.jpg', 'price': {'selling_price': 36260.0, 'marking_price': 38990}}}, {'id': '16993', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--26725', 'title': 'Oppo F7 Smart Mobile Phone - [4GB 64GB 3400mAh]', 'image': 'https://sd.azureedge.net/0/images/product/16993/9black-C-16993.jpg', 'price': {'selling_price': 36260.0, 'marking_price': 38990}}}, {'id': '16993', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--26724', 'title': 'Oppo F7 Smart Mobile Phone - [4GB 64GB 3400mAh]', 'image': 'https://sd.azureedge.net/0/images/product/16993/9grey-C-16993.jpg', 'price': {'selling_price': 36260.0, 'marking_price': 38990}}}, {'id': '14947', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22937', 'title': 'Oppo F5s Smartphone Gold [6"  6GB  64GB  16MP  20MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14947/2gold-C-14947.jpg', 'price': {'selling_price': 42740.0, 'marking_price': 44990}}}, {'id': '14947', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22936', 'title': 'Oppo F5s Smartphone Black [6"  6GB  64GB  16MP  20MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14947/2black-C-14947.jpg', 'price': {'selling_price': 42740.0, 'marking_price': 44990}}}, {'id': '14946', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22935', 'title': 'Oppo F5 Smartphone Gold [6"  4GB  32GB  16MP  20MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14946/3gold-C-14946.jpg', 'price': {'selling_price': 32290.0, 'marking_price': 33990}}}, {'id': '14946', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22934', 'title': 'Oppo F5 Smartphone Black [6"  4GB  32GB  16MP  20MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14946/3black-C-14946.jpg', 'price': {'selling_price': 32290.0, 'marking_price': 33990}}}, {'id': '14945', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22933', 'title': 'Oppo F3 Smartphone Gold [5.5"  4GB  64GB  13MP  16+8MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14945/4gold-C-14945.jpg', 'price': {'selling_price': 31340.0, 'marking_price': 32990}}}, {'id': '14945', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22932', 'title': 'Oppo F3 Smartphone Black [5.5"  4GB  64GB  13MP  16+8MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14945/4black-C-14945.jpg', 'price': {'selling_price': 31340.0, 'marking_price': 32990}}}, {'id': '14944', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22931', 'title': 'Oppo F5 Youth Smartphone Gold [6"  3GB  32GB  13MP  16MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14944/5gold-C-14944.jpg', 'price': {'selling_price': 26590.0, 'marking_price': 27990}}}, {'id': '14944', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22930', 'title': 'Oppo F5 Youth Smartphone Black [6"  3GB  32GB  13MP  16MP  3200mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14944/5black-C-14944.jpg', 'price': {'selling_price': 26590.0, 'marking_price': 27990}}}, {'id': '14943', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22929', 'title': 'Oppo A57 Smartphone Gold [5.2"  3GB  32GB  13MP  16MP  2900mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14943/7gold-C-14943.jpg', 'price': {'selling_price': 23740.0, 'marking_price': 24990}}}, {'id': '14943', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22928', 'title': 'Oppo A57 Smartphone Black [5.2"  3GB  32GB  13MP  16MP  2900mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14943/7black-C-14943.jpg', 'price': {'selling_price': 23740.0, 'marking_price': 24990}}}, {'id': '14942', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22927', 'title': "Oppo A71 Smartphone Gold [5.2'  3GB  16GB  13MP  5MP  3000mAH]", 'image': 'https://sd.azureedge.net/0/images/product/14942/6gold-C-14942.jpg', 'price': {'selling_price': 20890.0, 'marking_price': 21990}}}, {'id': '14942', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22926', 'title': "Oppo A71 Smartphone Black [5.2'  3GB  16GB  13MP  5MP  3000mAH]", 'image': 'https://sd.azureedge.net/0/images/product/14942/6black-C-14942.jpg', 'price': {'selling_price': 20890.0, 'marking_price': 21990}}}, {'id': '14941', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22925', 'title': 'Oppo A37F Smartphone Gold [5"   2GB  16GB  8MP  5MP  2360mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14941/8gold-C-14941.jpg', 'price': {'selling_price': 14810.0, 'marking_price': 15590}}}, {'id': '14941', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22924', 'title': 'Oppo A37F Smartphone Black [5"   2GB  16GB  8MP  5MP  2360mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14941/8black-C-14941.jpg', 'price': {'selling_price': 14810.0, 'marking_price': 15590}}}, {'id': '14940', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22943', 'title': 'Oppo A83 Smartphone Black [5.7"  3GB  32GB  13MP  3180mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14940/black-C-14940.jpg', 'price': {'selling_price': 22310.0, 'marking_price': 23990}}}, {'id': '14940', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--22923', 'title': 'Oppo A83 Smartphone Champagne [5.7"  3GB  32GB  13MP  3180mAh]', 'image': 'https://sd.azureedge.net/0/images/product/14940/2a-C-14940.jpg', 'price': {'selling_price': 22310.0, 'marking_price': 23990}}}, {'id': '4024', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--7094', 'title': 'Oppo in-Ear Headphone', 'image': 'https://sd.azureedge.net/0/images/product/4024/20659-p-0.jpg', 'price': {'selling_price': 1500.0, 'marking_price': 1500}}}, {'id': '35719', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--48353', 'title': 'Oppositional Politics In Nepal', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 255.0, 'marking_price': 300}}}, {'id': '2981', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--4799', 'title': 'Oppo USB Cable 1.0m', 'image': 'https://sd.azureedge.net/0/images/product/2981/12903-p-0.jpg', 'price': {'selling_price': 450.0, 'marking_price': 600}}}, {'id': '8859', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--13775', 'title': 'Character Opportunities Timidity', 'image': 'https://sd.azureedge.net/0/images/product/8859/SD-SD-684-p-0.jpg', 'price': {'selling_price': 271.0, 'marking_price': 319}}}, {'id': '38760', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--51544', 'title': 'Character Opportunities Timidity', 'image': 'https://sd.azureedge.net/0/images/product/38760/Trilogy-SB-25161-p-0.jpg', 'price': {'selling_price': 271.0, 'marking_price': 319}}}, {'id': '24772', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--37406', 'title': 'Learn Opposites Ready For School Language And Literacy Development', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 170.0, 'marking_price': 200}}}, {'id': '25501', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--38135', 'title': 'My First Opposites', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 340.0, 'marking_price': 400}}}, {'id': '23311', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--35945', 'title': 'Double Magic Opposites', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 102.0, 'marking_price': 120}}}, {'id': '22997', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--35631', 'title': 'Colours And Opposites Wipe And Use', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 85.0, 'marking_price': 100}}}, {'id': '12388', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--19011', 'title': 'Crisis as Opportunity 01 Edition', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 265.0, 'marking_price': 312}}}, {'id': '25314', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--37948', 'title': 'Mini Board Books Opposites', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 85.0, 'marking_price': 100}}}, {'id': '22371', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--35005', 'title': 'Ben 10 Omniverse Opposites', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 184.0, 'marking_price': 216}}}, {'id': '25486', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--38120', 'title': 'My First Book Of Opposites', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 404.0, 'marking_price': 475}}}, {'id': '25485', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--38119', 'title': 'My First Book Of Opposites', 'image': 'https://sd.azureedge.net/0/images/noImage.jpg', 'price': {'selling_price': 85.0, 'marking_price': 100}}}, {'id': '39653', 'details': {'origin': 1, 'url': 'https://www.sastodeal.com/sastodeal/pr--52437', 'title': 'Whatever You Think Think The Opposite', 'image': 'https://sd.azureedge.net/0/images/product/39653/Trilogy-SB-26054-p-0.jpg', 'price': {'selling_price': 598.0, 'marking_price': 703}}}, {'id': 0, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/80480/I/Oppo-F7-4GB-RAM-64GB-ROM.aspx?MID=1&CID=10763', 'title': 'Oppo F7 4GB RAM 64GB ROM', 'image': 'http://shop.muncha.com/img/t80480.jpg', 'price': {'selling_price': 38990.0, 'marking_price': None}}}, {'id': 1, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81941/I/Oppo-A3s---3GB.aspx?MID=1&CID=12600', 'title': 'Oppo A3s - 3GB', 'image': 'http://shop.muncha.com/img/t81941.jpg', 'price': {'selling_price': 26690.0, 'marking_price': None}}}, {'id': 2, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81942/I/Oppo-A3s---2-GB.aspx?MID=1&CID=10764', 'title': 'Oppo A3s - 2 GB', 'image': 'http://shop.muncha.com/img/t81942.jpg', 'price': {'selling_price': 19690.0, 'marking_price': None}}}, {'id': 3, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81943/I/Oppo-F9-Pro.aspx?MID=1&CID=10764', 'title': 'Oppo F9 Pro', 'image': 'http://shop.muncha.com/img/t81943.jpg', 'price': {'selling_price': 45390.0, 'marking_price': None}}}, {'id': 4, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81944/I/Oppo-F9.aspx?MID=1&CID=10764', 'title': 'Oppo F9', 'image': 'http://shop.muncha.com/img/t81944.jpg', 'price': {'selling_price': 41890.0, 'marking_price': None}}}, {'id': 5, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/80480/I/Oppo-F7-4GB-RAM-64GB-ROM.aspx?MID=1&CID=10763', 'title': 'Oppo F7 4GB RAM 64GB ROM', 'image': 'http://shop.muncha.com/img/t80480.jpg', 'price': {'selling_price': 38990.0, 'marking_price': None}}}, {'id': 6, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81941/I/Oppo-A3s---3GB.aspx?MID=1&CID=12600', 'title': 'Oppo A3s - 3GB', 'image': 'http://shop.muncha.com/img/t81941.jpg', 'price': {'selling_price': 26690.0, 'marking_price': None}}}, {'id': 7, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81942/I/Oppo-A3s---2-GB.aspx?MID=1&CID=10764', 'title': 'Oppo A3s - 2 GB', 'image': 'http://shop.muncha.com/img/t81942.jpg', 'price': {'selling_price': 19690.0, 'marking_price': None}}}, {'id': 8, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81943/I/Oppo-F9-Pro.aspx?MID=1&CID=10764', 'title': 'Oppo F9 Pro', 'image': 'http://shop.muncha.com/img/t81943.jpg', 'price': {'selling_price': 45390.0, 'marking_price': None}}}, {'id': 9, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/81944/I/Oppo-F9.aspx?MID=1&CID=10764', 'title': 'Oppo F9', 'image': 'http://shop.muncha.com/img/t81944.jpg', 'price': {'selling_price': 41890.0, 'marking_price': None}}}, {'id': 10, 'details': {'origin': 3, 'url': 'http://www.shop.muncha.com/34017/I/Good-Luck-Card-(GCCHT063).aspx?MID=1&CID=401', 'title': 'Good Luck Card (GCCHT063)', 'image': 'http://shop.muncha.com/img/t34017.jpg', 'price': {'selling_price': 100.0, 'marking_price': None}}}]

def search(request, query):
    # data = scraper(query)
    context = {
        'title' : 'Home',
        'data': data
    }
    return render(request, 'main/home.html', context)